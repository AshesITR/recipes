<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Roles in Recipes • recipes</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="../tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../tidyverse-2.css" rel="stylesheet">
<meta property="og:title" content="Roles in Recipes">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">recipes</a>
        <div class="info">
          <span class="partof">part of <a href="https://github.com/tidymodels">tidymodels</a></span>
          <span class="version version-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.10</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/Simple_Example.html">Simple Example</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Selecting_Variables.html">Selecting Variables</a>
    </li>
    <li>
      <a href="../articles/Custom_Steps.html">Custom Steps</a>
    </li>
    <li>
      <a href="../articles/Ordering.html">The Order of Steps</a>
    </li>
    <li>
      <a href="../articles/Dummies.html">Dummy Variables and Interactions</a>
    </li>
    <li>
      <a href="../articles/Roles.html">Column Roles</a>
    </li>
    <li>
      <a href="../articles/Skipping.html">On Skipping Steps</a>
    </li>
    <li>
      <a href="../articles/articles/Subsampling.html">Subsampling for Class Imbalances</a>
    </li>
    <li>
      <a href="../articles/articles/Multivariate_PLS.html">Multivariate Analysis using Partial Least Squares</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
        <li>
  <a href="https://github.com/tidymodels/recipes">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Roles in Recipes</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidymodels/recipes/blob/master/vignettes/Roles.Rmd"><code>vignettes/Roles.Rmd</code></a></small>
      <div class="hidden name"><code>Roles.Rmd</code></div>

    </div>

    
    
<p><code>recipes</code> can assign one or more roles to each column in the data. The roles are not restricted to a predefined set; they can be anything. For most conventional situations, they are typically “predictor” and/or “outcome”. Additional roles enable targeted step operations on specific variables or groups of variables.</p>
<div id="the-formula-method" class="section level2">
<h2 class="hasAnchor">
<a href="#the-formula-method" class="anchor"></a>The Formula Method</h2>
<p>When a recipe is created using the formula interface, this defines the roles for all columns of the data set. <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> can be used to view a tibble containing information regarding the roles.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(recipes)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="../reference/recipe.html">recipe</a></span>(Species <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> iris) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>()</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co">#&gt; # A tibble: 5 x 4</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co">#&gt;   variable     type    role      source  </span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;   </span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="co">#&gt; 1 Sepal.Length numeric predictor original</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co">#&gt; 2 Sepal.Width  numeric predictor original</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co">#&gt; 3 Petal.Length numeric predictor original</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co">#&gt; 4 Petal.Width  numeric predictor original</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co">#&gt; 5 Species      nominal outcome   original</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="kw"><a href="../reference/recipe.html">recipe</a></span>( <span class="op">~</span><span class="st"> </span>Species, <span class="dt">data =</span> iris) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>()</a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co">#&gt; # A tibble: 1 x 4</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co">#&gt;   variable type    role      source  </span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;   </span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="co">#&gt; 1 Species  nominal predictor original</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="kw"><a href="../reference/recipe.html">recipe</a></span>(Sepal.Length <span class="op">+</span><span class="st"> </span>Sepal.Width <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> iris) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>()</a>
<a class="sourceLine" id="cb1-20" data-line-number="20"><span class="co">#&gt; # A tibble: 5 x 4</span></a>
<a class="sourceLine" id="cb1-21" data-line-number="21"><span class="co">#&gt;   variable     type    role      source  </span></a>
<a class="sourceLine" id="cb1-22" data-line-number="22"><span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;   </span></a>
<a class="sourceLine" id="cb1-23" data-line-number="23"><span class="co">#&gt; 1 Petal.Length numeric predictor original</span></a>
<a class="sourceLine" id="cb1-24" data-line-number="24"><span class="co">#&gt; 2 Petal.Width  numeric predictor original</span></a>
<a class="sourceLine" id="cb1-25" data-line-number="25"><span class="co">#&gt; 3 Species      nominal predictor original</span></a>
<a class="sourceLine" id="cb1-26" data-line-number="26"><span class="co">#&gt; 4 Sepal.Length numeric outcome   original</span></a>
<a class="sourceLine" id="cb1-27" data-line-number="27"><span class="co">#&gt; 5 Sepal.Width  numeric outcome   original</span></a></code></pre></div>
<p>These roles can be updated despite this initial assignment. <code><a href="../reference/roles.html">update_role()</a></code> can modify a single existing role:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(modeldata)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(biomass)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="kw"><a href="../reference/recipe.html">recipe</a></span>(HHV <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> biomass) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="../reference/roles.html">update_role</a></span>(dataset, <span class="dt">new_role =</span> <span class="st">"dataset split variable"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="../reference/roles.html">update_role</a></span>(sample, <span class="dt">new_role =</span> <span class="st">"sample ID"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>()</a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt; # A tibble: 8 x 4</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt;   variable type    role                   source  </span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;                  &lt;chr&gt;   </span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt; 1 sample   nominal sample ID              original</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt; 2 dataset  nominal dataset split variable original</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt; 3 carbon   numeric predictor              original</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt; 4 hydrogen numeric predictor              original</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt; 5 oxygen   numeric predictor              original</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt; 6 nitrogen numeric predictor              original</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt; 7 sulfur   numeric predictor              original</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt; 8 HHV      numeric outcome                original</span></a></code></pre></div>
<p>When you want to get rid of a role for a column, use <code><a href="../reference/roles.html">remove_role()</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="../reference/recipe.html">recipe</a></span>(HHV <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> biomass) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/roles.html">remove_role</a></span>(sample, <span class="dt">old_role =</span> <span class="st">"predictor"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>()</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; # A tibble: 8 x 4</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt;   variable type    role      source  </span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;   </span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; 1 sample   nominal &lt;NA&gt;      original</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt; 2 dataset  nominal predictor original</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt; 3 carbon   numeric predictor original</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt; 4 hydrogen numeric predictor original</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt; 5 oxygen   numeric predictor original</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt; 6 nitrogen numeric predictor original</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">#&gt; 7 sulfur   numeric predictor original</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">#&gt; 8 HHV      numeric outcome   original</span></a></code></pre></div>
<p>It represents the lack of a role as <code>NA</code>, which means that the variable is used in the recipe, but does not yet have a declared role. Setting the role manually to <code>NA</code> is not allowed:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="../reference/recipe.html">recipe</a></span>(HHV <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> biomass) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/roles.html">update_role</a></span>(sample, <span class="dt">new_role =</span> <span class="ot">NA_character_</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt; Error: `new_role` must not be `NA`.</span></a></code></pre></div>
<p>When there are cases when a column will be used in more than one context, <code><a href="../reference/roles.html">add_role()</a></code> can create additional roles:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">multi_role &lt;-<span class="st"> </span><span class="kw"><a href="../reference/recipe.html">recipe</a></span>(HHV <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> biomass) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/roles.html">update_role</a></span>(dataset, <span class="dt">new_role =</span> <span class="st">"dataset split variable"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/roles.html">update_role</a></span>(sample, <span class="dt">new_role =</span> <span class="st">"sample ID"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="st">  </span><span class="co"># Roles below from https://wordcounter.net/random-word-generator</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="../reference/roles.html">add_role</a></span>(sample, <span class="dt">new_role =</span> <span class="st">"jellyfish"</span>) </a>
<a class="sourceLine" id="cb5-6" data-line-number="6"></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">multi_role <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>()</a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt; # A tibble: 9 x 4</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt;   variable type    role                   source  </span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;                  &lt;chr&gt;   </span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt; 1 sample   nominal sample ID              original</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt; 2 sample   nominal jellyfish              original</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt; 3 dataset  nominal dataset split variable original</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt; 4 carbon   numeric predictor              original</span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">#&gt; 5 hydrogen numeric predictor              original</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="co">#&gt; 6 oxygen   numeric predictor              original</span></a>
<a class="sourceLine" id="cb5-18" data-line-number="18"><span class="co">#&gt; 7 nitrogen numeric predictor              original</span></a>
<a class="sourceLine" id="cb5-19" data-line-number="19"><span class="co">#&gt; 8 sulfur   numeric predictor              original</span></a>
<a class="sourceLine" id="cb5-20" data-line-number="20"><span class="co">#&gt; 9 HHV      numeric outcome                original</span></a></code></pre></div>
<p>If a variable has multiple existing roles and you want to update one of them, the additional <code>old_role</code> argument to <code><a href="../reference/roles.html">update_role()</a></code> must be used to resolve any ambiguity.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">multi_role <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/roles.html">update_role</a></span>(sample, <span class="dt">new_role =</span> <span class="st">"flounder"</span>, <span class="dt">old_role =</span> <span class="st">"jellyfish"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>()</a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt; # A tibble: 9 x 4</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt;   variable type    role                   source  </span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;                  &lt;chr&gt;   </span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt; 1 sample   nominal sample ID              original</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt; 2 sample   nominal flounder               original</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt; 3 dataset  nominal dataset split variable original</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt; 4 carbon   numeric predictor              original</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt; 5 hydrogen numeric predictor              original</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt; 6 oxygen   numeric predictor              original</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt; 7 nitrogen numeric predictor              original</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co">#&gt; 8 sulfur   numeric predictor              original</span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="co">#&gt; 9 HHV      numeric outcome                original</span></a></code></pre></div>
<p>Additional variable roles allow you to use <code><a href="../reference/has_role.html">has_role()</a></code> in combination with other selection methods (see <code><a href="../reference/selections.html">?selections</a></code>) to target specific variables in subsequent processing steps. For example, in the following recipe, by adding the role <code>"nocenter"</code> to the <code>HHV</code> predictor, you can use <code>-has_role("nocenter")</code> to exclude <code>HHV</code> when centering <code><a href="../reference/has_role.html">all_predictors()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">multi_role <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/roles.html">add_role</a></span>(HHV, <span class="dt">new_role =</span> <span class="st">"nocenter"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/step_center.html">step_center</a></span>(<span class="kw"><a href="../reference/has_role.html">all_predictors</a></span>(), <span class="op">-</span><span class="kw"><a href="../reference/has_role.html">has_role</a></span>(<span class="st">"nocenter"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/prep.html">prep</a></span>(<span class="dt">training =</span> biomass, <span class="dt">retain =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="../reference/juice.html">juice</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>()</a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt; # A tibble: 6 x 8</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt;   sample                 dataset  carbon hydrogen oxygen nitrogen  sulfur   HHV</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt;   &lt;fct&gt;                  &lt;fct&gt;     &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt; 1 Akhrot Shell           Training  1.52    0.181    4.37  -0.667  -0.234   20.0</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt; 2 Alabama Oak Wood Waste Training  1.21    0.241    2.73  -0.877  -0.234   19.2</span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt; 3 Alder                  Training -0.475   0.341    7.68  -0.967  -0.214   18.3</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt; 4 Alfalfa                Training -3.19   -0.489   -2.97   2.22   -0.0736  18.2</span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co">#&gt; 5 Alfalfa Seed Straw     Training -1.53   -0.0586   2.15  -0.0772 -0.214   18.4</span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="co">#&gt; 6 Alfalfa Stalks         Training -2.89    0.291    1.63   0.963  -0.134   18.5</span></a></code></pre></div>
</div>
<div id="the-non-formula-interface" class="section level2">
<h2 class="hasAnchor">
<a href="#the-non-formula-interface" class="anchor"></a>The Non-Formula Interface</h2>
<p>You can start a recipe without any roles:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="../reference/recipe.html">recipe</a></span>(biomass) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>()</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt; # A tibble: 8 x 4</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt;   variable type    role  source  </span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;   &lt;lgl&gt; &lt;chr&gt;   </span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt; 1 sample   nominal NA    original</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt; 2 dataset  nominal NA    original</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt; 3 carbon   numeric NA    original</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">#&gt; 4 hydrogen numeric NA    original</span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co">#&gt; 5 oxygen   numeric NA    original</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="co">#&gt; 6 nitrogen numeric NA    original</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="co">#&gt; 7 sulfur   numeric NA    original</span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13"><span class="co">#&gt; 8 HHV      numeric NA    original</span></a></code></pre></div>
<p>and roles can be added in bulk as needed:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="../reference/recipe.html">recipe</a></span>(biomass) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/roles.html">update_role</a></span>(<span class="kw">contains</span>(<span class="st">"gen"</span>), <span class="dt">new_role =</span> <span class="st">"lunchroom"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/roles.html">update_role</a></span>(sample, HHV, <span class="dt">new_role =</span> <span class="st">"snail"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>()</a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#&gt; # A tibble: 8 x 4</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt;   variable type    role      source  </span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;   </span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#&gt; 1 sample   nominal snail     original</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="co">#&gt; 2 dataset  nominal &lt;NA&gt;      original</span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="co">#&gt; 3 carbon   numeric &lt;NA&gt;      original</span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="co">#&gt; 4 hydrogen numeric lunchroom original</span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"><span class="co">#&gt; 5 oxygen   numeric lunchroom original</span></a>
<a class="sourceLine" id="cb9-13" data-line-number="13"><span class="co">#&gt; 6 nitrogen numeric lunchroom original</span></a>
<a class="sourceLine" id="cb9-14" data-line-number="14"><span class="co">#&gt; 7 sulfur   numeric &lt;NA&gt;      original</span></a>
<a class="sourceLine" id="cb9-15" data-line-number="15"><span class="co">#&gt; 8 HHV      numeric snail     original</span></a></code></pre></div>
</div>
<div id="role-inheritance" class="section level2">
<h2 class="hasAnchor">
<a href="#role-inheritance" class="anchor"></a>Role Inheritance</h2>
<p>All recipes steps have a <code>role</code> argument that lets you set the role of <em>new</em> columns generated by the step. When a recipe modifies a column in-place, the role is never modified. For example, <code><a href="../reference/step_center.html">?step_center</a></code> has the documentation:</p>
<blockquote>
<p><code>role</code>: Not used by this step since no new variables are created</p>
</blockquote>
<p>In other cases, the roles are defaulted to a relevant value based the context. For example, <code><a href="../reference/step_dummy.html">?step_dummy</a></code> has</p>
<blockquote>
<p><code>role</code>: For model terms created by this step, what analysis role should they be assigned?. By default, the function assumes that the binary dummy variable columns created by the original variables will be used as predictors in a model.</p>
</blockquote>
<p>So, by default, they are predictors but don’t have to be:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="../reference/recipe.html">recipe</a></span>( <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> iris) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/step_dummy.html">step_dummy</a></span>(Species) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/prep.html">prep</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/juice.html">juice</a></span>(<span class="kw"><a href="../reference/has_role.html">all_predictors</a></span>()) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="kw">starts_with</span>(<span class="st">"Species"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>()</a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#&gt; [1] "Species_versicolor" "Species_virginica"</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co"># or something else</span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="kw"><a href="../reference/recipe.html">recipe</a></span>( <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> iris) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="st">  </span><span class="kw"><a href="../reference/step_dummy.html">step_dummy</a></span>(Species, <span class="dt">role =</span> <span class="st">"trousers"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="st">  </span><span class="kw"><a href="../reference/prep.html">prep</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="st">  </span><span class="kw"><a href="../reference/juice.html">juice</a></span>(<span class="kw"><a href="../reference/has_role.html">has_role</a></span>(<span class="st">"trousers"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>()</a>
<a class="sourceLine" id="cb10-15" data-line-number="15"><span class="co">#&gt; [1] "Species_versicolor" "Species_virginica"</span></a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#the-formula-method">The Formula Method</a></li>
      <li><a href="#the-non-formula-interface">The Non-Formula Interface</a></li>
      <li><a href="#role-inheritance">Role Inheritance</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="tidyverse">
  <p>recipes is a part of the <strong>tidymodels</strong> ecosystem, a collection of modeling packages designed with common APIs and a shared philosophy.</p>
</div>

<div class="author">
  <p>
    Developed by Max Kuhn, <a href="http://hadley.nz">Hadley Wickham</a>.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
</div>

  


  </body>
</html>
